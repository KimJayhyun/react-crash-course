> [React 공식문서](https://react.dev/reference/react/useState#updating-state-based-on-the-previous-state)


### ✅ 이전 상태를 기반으로 상태 업데이트하기

예를 들어, `age`의 값이 42라고 가정해봅시다. 다음과 같이 `setAge(age + 1)`을 세 번 호출하는 코드가 있다고 할 때:

```js
function handleClick() {
  setAge(age + 1); // setAge(42 + 1)
  setAge(age + 1); // setAge(42 + 1)
  setAge(age + 1); // setAge(42 + 1)
}
```

이 코드를 클릭하면 `age`는 45가 아닌 **43**이 됩니다. 왜일까요?

이는 `setAge()`를 호출한다고 해서 즉시 `age` 값이 업데이트되는 것이 아니기 때문입니다. 이 코드가 실행되는 동안의 `age`는 여전히 42로 유지되고 있어서, 세 번 모두 `setAge(43)`으로 처리되기 때문입니다.

---

### 🔧 해결 방법: 업데이트 함수 사용하기

이 문제를 해결하려면, 다음 상태 값을 직접 넘기지 말고 **업데이트 함수**를 `setAge`에 전달해야 합니다:

```js
function handleClick() {
  setAge(a => a + 1); // setAge(42 => 43)
  setAge(a => a + 1); // setAge(43 => 44)
  setAge(a => a + 1); // setAge(44 => 45)
}
```

`a => a + 1`은 현재 상태(`a`)를 받아 다음 상태를 계산하는 **업데이트 함수**입니다.

---

### 🔄 React의 처리 방식

React는 이러한 **업데이트 함수들을 큐(queue)에 저장**한 뒤, 다음 렌더링 시 순서대로 실행합니다:

1. 첫 번째 `a => a + 1`: `a = 42` → 반환값 43
2. 두 번째 `a => a + 1`: `a = 43` → 반환값 44
3. 세 번째 `a => a + 1`: `a = 44` → 반환값 45

이 결과로 `age`는 45가 됩니다.

---

### 📝 네이밍 팁

업데이트 함수의 매개변수 이름은 보통 상태 변수의 첫 글자를 따서 지으며, 예: `a` for `age`.
하지만 `prevAge`처럼 더 명확한 이름을 써도 무방합니다.

---

### 🧪 개발 모드에서의 주의점

React는 개발 모드에서 \*\*업데이트 함수가 순수 함수(pure function)\*\*인지 확인하기 위해 두 번 호출할 수 있습니다.
(즉, 부작용이 없어야 함)
